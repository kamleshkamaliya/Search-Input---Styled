var PREFIX="hubspot-search-styled",getConfig=function(){var l=document.getElementById("conf-domain"),n=document.getElementById("conf-pagination-mode"),g=document.getElementById("conf-grid-limit"),b=document.getElementById("conf-typeahead-limit"),f=document.getElementById("conf-auto-scroll");return{domain:l?l.value.trim():"www.hubspot.com",paginationMode:n?n.value:"loadMore",gridLimit:g&&parseInt(g.value)||6,dropdownLimit:b&&parseInt(b.value)||3,autoScroll:f?f.checked:!0}},hsSearch=function(l){var n="",g=l,b=l.querySelector("."+PREFIX+"-input"),f=l.querySelector("."+PREFIX+"-suggestions"),i=document.querySelector("."+PREFIX+"-results-area"),c=document.getElementById("results-section"),S="dropdown",a=0,p=0;const F=function(e){return e},H=function(){let e=[];const t=l.querySelector("form");for(let r=0;r<t.querySelectorAll("input[type=hidden]").length;r++){const o=t.querySelectorAll("input[type=hidden]")[r];o.name!=="limit"&&e.push(encodeURIComponent(o.name)+"="+encodeURIComponent(o.value))}return e.join("&")};var R=function(e,t,r){var o;return function(){var d=this,v=arguments,s=function(){o=null,r||e.apply(d,v)},y=r&&!o;clearTimeout(o),o=setTimeout(s,t||200),y&&e.apply(d,v)}},x=function(){f.innerHTML="",g.classList.remove(PREFIX+"-open"),S==="dropdown"&&(a=0,p=0)},I=function(e){if(!e)return"";var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},j=function(e,t){var r="";e.featuredImageUrl&&(r="<div class='"+PREFIX+"-img'><img src='"+e.featuredImageUrl+"' alt='"+I(e.title)+"'></div>");var o=e.description?"<p class='"+PREFIX+"-desc'>"+(I(e.description).substring(0,60)+"...")+"</p>":"";return"<li class='"+PREFIX+"-item' id='"+PREFIX+"-result-"+t+"'><a href='"+e.url+"'>"+r+"<div class='"+PREFIX+"-content'><span class='"+PREFIX+"-title'>"+e.title+"</span>"+o+"</div></a></li>"},k=function(e,t){var r=e.featuredImageUrl?"<div class='"+PREFIX+"-card-img'><img src='"+e.featuredImageUrl+"' alt='"+I(e.title)+"'></div>":"<div class='"+PREFIX+"-card-img' style='background:#f1f5f9; display:flex; align-items:center; justify-content:center;'><span style='color:#cbd6e2; font-size:3rem;'><i class='fas fa-image'></i></span></div>",o=e.description?"<p class='"+PREFIX+"-card-desc'>"+I(e.description)+"</p>":"";return"<a href='"+e.url+"' class='"+PREFIX+"-card' id='"+PREFIX+"-card-"+t+"'>"+r+"<div class='"+PREFIX+"-card-content'><h3 class='"+PREFIX+"-card-title'>"+e.title+"</h3>"+o+"<div class='"+PREFIX+"-card-cta'>Read More &rarr;</div></div></a>"},B=function(e,t){S==="dropdown"?U(e,t):C(e,t)},U=function(e,t){var r=getConfig(),o=[];t||o.push("<li class='"+PREFIX+`-header'>Results for "`+e.searchTerm+'"</li>'),e.results.forEach(function(h,L){o.push(j(h,t?a+L:L))});var d=f.querySelector("."+PREFIX+"-load-more");if(d&&d.remove(),p>a+r.dropdownLimit&&o.push("<li class='"+PREFIX+"-load-more'>Load More ("+(p-(a+r.dropdownLimit))+")</li>"),t?f.insertAdjacentHTML("beforeend",o.join("")):f.innerHTML=o.join(""),g.classList.add(PREFIX+"-open"),t&&r.autoScroll){var v=PREFIX+"-result-"+a,s=document.getElementById(v);s&&setTimeout(function(){f.scrollTo({top:s.offsetTop,behavior:"smooth"})},100)}var y=f.querySelector("."+PREFIX+"-load-more");y&&y.addEventListener("click",function(h){h.stopPropagation(),h.preventDefault(),a+=r.dropdownLimit,y.innerHTML="Loading...",T(!0)})},C=function(e,t){var r=getConfig();c&&c.classList.remove("hidden");var o=i.querySelector("."+PREFIX+"-grid");(!o||r.paginationMode==="pagination"||!t)&&(i.innerHTML='<h2 class="text-2xl font-bold text-slate-800 mb-6 border-b border-slate-200 pb-4">Search Results for: "<span class="text-primary">'+e.searchTerm+'</span>" <span class="text-sm font-normal text-slate-400 float-right">Total: '+p+'</span></h2><div class="'+PREFIX+'-grid"></div>',o=i.querySelector("."+PREFIX+"-grid"));var d=[];e.results.forEach(function(q,M){d.push(k(q,t?a+M:M))}),r.paginationMode==="loadMore"&&t?o.insertAdjacentHTML("beforeend",d.join("")):o.innerHTML=d.join("");var v=i.querySelector("."+PREFIX+"-grid-load-more"),s=i.querySelector(".hubspot-search-pagination");if(v&&v.remove(),s&&s.remove(),r.paginationMode==="loadMore"){if(p>a+r.gridLimit){var y="<button class='"+PREFIX+"-grid-load-more'>Load More Posts ("+(p-(a+r.gridLimit))+" remaining)</button>";i.insertAdjacentHTML("beforeend",y);var h=i.querySelector("."+PREFIX+"-grid-load-more");h.addEventListener("click",function(){a+=r.gridLimit,h.innerHTML="<i class='fas fa-spinner fa-spin mr-2'></i> Loading...",h.disabled=!0,T(!0)})}}else{var L=Math.ceil(p/r.gridLimit);if(L>1){var m=Math.floor(a/r.gridLimit)+1,E='<div class="hubspot-search-pagination">';E+=`<button class="hs-page-btn" ${m===1?"disabled":""} data-page="${m-1}"><i class="fas fa-chevron-left"></i></button>`;for(var u=1;u<=L;u++)u===1||u===L||u>=m-1&&u<=m+1?E+=`<button class="hs-page-btn ${u===m?"active":""}" data-page="${u}">${u}</button>`:(u===m-2||u===m+2)&&(E+='<span class="px-2 text-slate-400">...</span>');E+=`<button class="hs-page-btn" ${m===L?"disabled":""} data-page="${m+1}"><i class="fas fa-chevron-right"></i></button>`,E+="</div>",i.insertAdjacentHTML("beforeend",E);var D=i.querySelectorAll(".hs-page-btn");D.forEach(q=>{q.addEventListener("click",function(){var M=parseInt(this.getAttribute("data-page"));M&&M!==m&&(a=(M-1)*r.gridLimit,c.scrollIntoView({behavior:"smooth",block:"start"}),T(!1))})})}}if(t&&r.autoScroll&&r.paginationMode==="loadMore"){var A=PREFIX+"-card-"+a,w=document.getElementById(A);w&&setTimeout(()=>w.scrollIntoView({behavior:"smooth",block:"center"}),100)}!t&&c&&setTimeout(()=>c.scrollIntoView({behavior:"smooth",block:"start"}),100)},T=function(e){var t=new XMLHttpRequest,r=getConfig(),o=r.domain.replace(/^https?:\/\//,"").replace(/\/$/,""),d=S==="dropdown"?r.dropdownLimit:r.gridLimit,v="https://"+o+"/_hcms/search?&term="+encodeURIComponent(n)+"&limit="+d+"&offset="+a+"&autocomplete=true&analytics=true&"+H();t.open("GET",v,!0),t.onload=function(){if(t.status>=200&&t.status<400){var s=JSON.parse(t.responseText);s.total>0&&(p=s.total),s.results&&s.results.length>0?B(s,e):e||(S==="dropdown"?x():(c&&c.classList.remove("hidden"),i.innerHTML='<div class="text-center py-12"><div class="text-4xl text-slate-300 mb-4"><i class="fas fa-search"></i></div><h3 class="text-lg font-semibold text-slate-600">No results found for "'+n+'"</h3></div>'))}else console.error("Error fetching results")},t.onerror=function(){console.error("Network Error")},t.send()},$=R(function(){n=b.value,n.length>2?(S="dropdown",a=0,T(!1)):n.length==0&&(x(),i&&(i.innerHTML=""),c&&c.classList.add("hidden"))},250);b.addEventListener("input",function(e){n!=b.value&&$()}),g.addEventListener("submit",function(e){e.preventDefault(),n=b.value,n.length>0&&(S="full",a=0,x(),c&&c.classList.remove("hidden"),i&&(i.innerHTML='<div class="hubspot-search-loader"><i class="fas fa-circle-notch fa-spin text-primary text-3xl mb-3"></i><br>Searching database...</div>'),T(!1))}),document.addEventListener("click",function(e){if(!l.contains(e.target)){if(e.target.closest(".hubspot-search-styled-config-panel"))return;f.innerHTML="",g.classList.remove(PREFIX+"-open")}})};if(document.attachEvent?document.readyState==="complete":document.readyState!=="loading"){var modules=document.querySelectorAll("."+PREFIX+"-field");Array.prototype.forEach.call(modules,function(l){hsSearch(l)})}else document.addEventListener("DOMContentLoaded",function(){var l=document.querySelectorAll("."+PREFIX+"-field");Array.prototype.forEach.call(l,function(n){hsSearch(n)})});